<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="College Class Schedule & Notifications">
    <meta name="theme-color" content="#2196F3">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 192 192'><rect fill='%232196F3' width='192' height='192'/><text x='50%' y='50%' font-size='100' fill='white' text-anchor='middle' dy='.3em'>üìö</text></svg>">
    <title>Class Schedule Calendar</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        header {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            text-align: center;
        }

        h1 {
            color: #333;
            font-size: 28px;
            margin-bottom: 10px;
        }

        .calendar-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .calendar-header button {
            background: #2196F3;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: background 0.3s;
        }

        .calendar-header button:hover {
            background: #1976D2;
        }

        .month-year {
            font-size: 24px;
            font-weight: bold;
            color: #333;
        }

        .weekdays {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
            margin-bottom: 10px;
        }

        .weekday {
            text-align: center;
            font-weight: bold;
            color: #2196F3;
            padding: 10px 0;
            font-size: 14px;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
            min-height: 600px;
        }

        .day-box {
            background: #f9f9f9;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 10px;
            min-height: 120px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .day-box:hover {
            background: #f0f7ff;
            border-color: #2196F3;
        }

        .day-box.other-month {
            background: #fafafa;
            opacity: 0.5;
        }

        .day-box.today {
            background: #e3f2fd;
            border-color: #2196F3;
            border-width: 3px;
        }

        .day-number {
            font-weight: bold;
            color: #333;
            margin-bottom: 8px;
            font-size: 16px;
        }

        .day-box.other-month .day-number {
            color: #999;
        }

        .class-event {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 4px 6px;
            border-radius: 4px;
            font-size: 11px;
            margin-bottom: 3px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            font-weight: 500;
        }

        .class-event.class1 { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .class-event.class5 { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }

        .info-box {
            background: #fff3cd;
            border: 1px solid #ffc107;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            color: #856404;
            text-align: center;
        }

        .notification-btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s;
            margin-top: 10px;
        }

        .notification-btn:hover {
            background: #45a049;
        }

        .next-class {
            background: #f0f7ff;
            border-left: 4px solid #2196F3;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }

        .next-class h3 {
            color: #2196F3;
            margin-bottom: 10px;
        }

        .class-name {
            font-size: 18px;
            font-weight: bold;
            color: #333;
        }

        .class-details {
            color: #666;
            font-size: 14px;
            margin-top: 5px;
        }

        @media (max-width: 768px) {
            .container {
                max-width: 100%;
            }

            .calendar-grid {
                min-height: 800px;
            }

            .day-box {
                min-height: 100px;
                padding: 8px;
            }

            .day-number {
                font-size: 14px;
            }

            .class-event {
                font-size: 10px;
            }

            .weekday {
                font-size: 12px;
            }
        }

        @media (max-width: 480px) {
            .container {
                max-width: 100%;
            }

            .calendar-grid {
                min-height: 1000px;
            }

            .day-box {
                min-height: 80px;
            }

            h1 {
                font-size: 22px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üìö Class Schedule Calendar</h1>
            <button class="notification-btn" onclick="requestNotifications()">
                üîî Enable Notifications
            </button>
            <div class="next-class" id="nextClass">
                <h3>Next Class</h3>
                <p style="color: #666;">Loading...</p>
            </div>
        </header>

        <div class="info-box">
            ‚ÑπÔ∏è Click on any date to see class details. Install this app to your home screen!
        </div>

        <div class="calendar-container">
            <div class="calendar-header">
                <button onclick="previousMonth()">‚Üê Previous</button>
                <div class="month-year" id="monthYear"></div>
                <button onclick="nextMonth()">Next ‚Üí</button>
            </div>

            <div class="weekdays">
                <div class="weekday">Sun</div>
                <div class="weekday">Mon</div>
                <div class="weekday">Tue</div>
                <div class="weekday">Wed</div>
                <div class="weekday">Thu</div>
                <div class="weekday">Fri</div>
                <div class="weekday">Sat</div>
            </div>

            <div class="calendar-grid" id="calendarGrid"></div>
        </div>
    </div>

    <script>
        // Class schedule data
        const classData = {
            '2026-02-16': [
                { name: 'Class 5', time: '08:00 - 10:00', type: 'class5' },
                { name: 'Class 6', time: '10:00 - 12:00', type: 'class5' },
                { name: 'Class 7', time: '12:00 - 14:00', type: 'class5' },
                { name: 'Class 8', time: '14:00 - 16:00', type: 'class5' }
            ],
            '2026-02-17': [
                { name: 'Class 1', time: '08:00 - 10:00', type: 'class1' },
                { name: 'Class 2', time: '10:00 - 12:00', type: 'class1' },
                { name: 'Class 3', time: '12:00 - 14:00', type: 'class1' },
                { name: 'Class 4', time: '14:00 - 16:00', type: 'class1' }
            ],
            '2026-02-18': [
                { name: 'Class 5', time: '08:00 - 10:00', type: 'class5' },
                { name: 'Class 6', time: '10:00 - 12:00', type: 'class5' },
                { name: 'Class 7', time: '12:00 - 14:00', type: 'class5' },
                { name: 'Class 8', time: '14:00 - 16:00', type: 'class5' }
            ],
            '2026-02-19': [
                { name: 'Class 1', time: '08:00 - 10:00', type: 'class1' },
                { name: 'Class 2', time: '10:00 - 12:00', type: 'class1' },
                { name: 'Class 3', time: '12:00 - 14:00', type: 'class1' },
                { name: 'Class 4', time: '14:00 - 16:00', type: 'class1' }
            ],
            '2026-02-20': [
                { name: 'Class 5', time: '08:00 - 10:00', type: 'class5' },
                { name: 'Class 6', time: '10:00 - 12:00', type: 'class5' },
                { name: 'Class 7', time: '12:00 - 14:00', type: 'class5' },
                { name: 'Class 8', time: '14:00 - 16:00', type: 'class5' }
            ],
            '2026-02-21': [
                { name: 'Saturday Classes', time: '09:00 - 13:00', type: 'class5' }
            ],
            '2026-02-23': [
                { name: 'Class 1', time: '08:00 - 10:00', type: 'class1' },
                { name: 'Class 2', time: '10:00 - 12:00', type: 'class1' },
                { name: 'Class 3', time: '12:00 - 14:00', type: 'class1' },
                { name: 'Class 4', time: '14:00 - 16:00', type: 'class1' }
            ],
            '2026-02-24': [
                { name: 'Class 5', time: '08:00 - 10:00', type: 'class5' },
                { name: 'Class 6', time: '10:00 - 12:00', type: 'class5' },
                { name: 'Class 7', time: '12:00 - 14:00', type: 'class5' },
                { name: 'Class 8', time: '14:00 - 16:00', type: 'class5' }
            ],
            '2026-02-25': [
                { name: 'Class 1', time: '08:00 - 10:00', type: 'class1' },
                { name: 'Class 2', time: '10:00 - 12:00', type: 'class1' },
                { name: 'Class 3', time: '12:00 - 14:00', type: 'class1' },
                { name: 'Class 4', time: '14:00 - 16:00', type: 'class1' }
            ],
            '2026-02-26': [
                { name: 'Class 5', time: '08:00 - 10:00', type: 'class5' },
                { name: 'Class 6', time: '10:00 - 12:00', type: 'class5' },
                { name: 'Class 7', time: '12:00 - 14:00', type: 'class5' },
                { name: 'Class 8', time: '14:00 - 16:00', type: 'class5' }
            ],
            '2026-02-27': [
                { name: 'Class 1', time: '08:00 - 10:00', type: 'class1' },
                { name: 'Class 2', time: '10:00 - 12:00', type: 'class1' },
                { name: 'Class 3', time: '12:00 - 14:00', type: 'class1' },
                { name: 'Class 4', time: '14:00 - 16:00', type: 'class1' }
            ],
            '2026-02-28': [
                { name: 'Saturday Classes', time: '09:00 - 13:00',type: 'class5' }
            ]
        };

        let currentMonth = 1; // February
        let currentYear = 2026;

        function renderCalendar() {
            const calendarGrid = document.getElementById('calendarGrid');
            const monthYearDisplay = document.getElementById('monthYear');
            
            // Display month and year
            const monthNames = ['January', 'February', 'March', 'April', 'May', 'June',
                'July', 'August', 'September', 'October', 'November', 'December'];
            monthYearDisplay.textContent = `${monthNames[currentMonth]} ${currentYear}`;

            // Get first day of month and number of days
            const firstDay = new Date(currentYear, currentMonth, 1).getDay();
            const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
            const daysInPrevMonth = new Date(currentYear, currentMonth, 0).getDate();

            calendarGrid.innerHTML = '';

            // Previous month's days
            for (let i = firstDay - 1; i >= 0; i--) {
                const dayBox = createDayBox(daysInPrevMonth - i, true);
                calendarGrid.appendChild(dayBox);
            }

            // Current month's days
            for (let day = 1; day <= daysInMonth; day++) {
                const dateStr = `${currentYear}-${String(currentMonth + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                const dayBox = createDayBox(day, false, dateStr);
                calendarGrid.appendChild(dayBox);
            }

            // Next month's days
            const totalCells = calendarGrid.children.length;
            const remainingCells = 42 - totalCells; // 6 rows √ó 7 days
            for (let day = 1; day <= remainingCells; day++) {
                const dayBox = createDayBox(day, true);
                calendarGrid.appendChild(dayBox);
            }

            updateNextClass();
        }

        function createDayBox(day, isOtherMonth, dateStr = null) {
            const dayBox = document.createElement('div');
            dayBox.className = 'day-box';
            
            if (isOtherMonth) {
                dayBox.classList.add('other-month');
            }

            // Check if it's today
            const today = new Date();
            if (!isOtherMonth && dateStr) {
                const todayStr = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;
                if (dateStr === todayStr) {
                    dayBox.classList.add('today');
                }
            }

            const dayNumber = document.createElement('div');
            dayNumber.className = 'day-number';
            dayNumber.textContent = day;
            dayBox.appendChild(dayNumber);

            // Add classes if this date has any
            if (dateStr && classData[dateStr]) {
                classData[dateStr].forEach(cls => {
                    const classEvent = document.createElement('div');
                    classEvent.className = `class-event ${cls.type}`;
                    classEvent.textContent = cls.name;
                    classEvent.title = `${cls.name}\n${cls.time}`;
                    dayBox.appendChild(classEvent);
                });
            }

            // Add click event
            if (!isOtherMonth && dateStr) {
                dayBox.onclick = () => showClassDetails(dateStr);
                dayBox.style.cursor = 'pointer';
            }

            return dayBox;
        }

        function previousMonth() {
            currentMonth--;
            if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            }
            renderCalendar();
        }

        function nextMonth() {
            currentMonth++;
            if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            }
            renderCalendar();
        }

        function showClassDetails(dateStr) {
            const classes = classData[dateStr];
            if (!classes || classes.length === 0) return;

            const date = new Date(dateStr + 'T00:00:00');
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            const dateDisplay = date.toLocaleDateString('en-US', options);

            let details = `${dateDisplay}\n\n`;
            classes.forEach(cls => {
                details += `${cls.name}\n‚è∞ ${cls.time}\n\n`;
            });

            alert(details);
        }

        function updateNextClass() {
            const now = new Date();
            const currentDateStr = now.toISOString().split('T')[0];
            const currentHours = now.getHours();
            const currentMinutes = now.getMinutes();
            const currentTotalMinutes = currentHours * 60 + currentMinutes;

            let nextClass = null;
            let nextClassDate = null;

            // Check all dates in classData
            for (const [dateStr, classes] of Object.entries(classData)) {
                const classDate = new Date(dateStr + 'T00:00:00');
                
                for (const cls of classes) {
                    const [startTime] = cls.time.split(' - ');
                    const [startHour, startMin] = startTime.split(':').map(Number);
                    const classStartMinutes = startHour * 60 + startMin;

                    // If it's today and the class hasn't started yet
                    if (dateStr === currentDateStr && classStartMinutes > currentTotalMinutes) {
                        nextClass = cls;
                        nextClassDate = dateStr;
                        break;
                    }
                    // If it's in the future
                    else if (dateStr > currentDateStr) {
                        nextClass = cls;
                        nextClassDate = dateStr;
                        break;
                    }
                }

                if (nextClass) break;
            }

            const nextClassDiv = document.getElementById('nextClass');
            if (nextClass) {
                const date = new Date(nextClassDate + 'T00:00:00');
                const options = { weekday: 'long', month: 'short', day: 'numeric' };
                const dateDisplay = date.toLocaleDateString('en-US', options);

                nextClassDiv.innerHTML = `
                    <h3>Next Class</h3>
                    <div class="class-name">${nextClass.name}</div>
                    <div class="class-details">üìÖ ${dateDisplay}</div>
                    <div class="class-details">‚è∞ ${nextClass.time}</div>
                  `;
            } else {
                nextClassDiv.innerHTML = `
                    <h3>Next Class</h3>
                    <p style="color: #666;">No upcoming classes scheduled</p>
                `;
            }
        }

        function requestNotifications() {
            if (!('Notification' in window)) {
                alert('Your browser does not support notifications');
                return;
            }

            if (Notification.permission === 'granted') {
                alert('‚úÖ Notifications already enabled!');
                return;
            }

            if (Notification.permission === 'denied') {
                alert('‚ö†Ô∏è Notifications are blocked. Please enable them in your browser settings.');
                return;
            }

            Notification.requestPermission().then(permission => {
                if (permission === 'granted') {
                    alert('‚úÖ Notifications enabled! You will receive class reminders 15 minutes before each class.');
                }
            });
        }

        // Register Service Worker
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js').then(reg => {
                console.log('Service Worker registered');
            }).catch(err => {
                console.log('Service Worker registration failed:', err);
            });
        }

        // Initialize
        renderCalendar();
    </script>
</body>
</html>
